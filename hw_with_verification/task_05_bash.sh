#!/bin/bash

# Запуск трех команд sleep в фоновом режиме
sleep 5 &
pid1=$!
echo "Запущена задача с PID $pid1: sleep 5"

sleep 10 &
pid2=$!
echo "Запущена задача с PID $pid2: sleep 10"

sleep 15 &
pid3=$!
echo "Запущена задача с PID $pid3: sleep 15"

# Ожидание чтобы увидеть состояние фоновых задач
echo "Демо управление задачами. Нажмите Ctrl+C, чтобы завершить."

# Показываем текущие фоновые задачи
jobs

# Ожидание ввода от пользователя
read -p "Нажмите 'Enter' чтобы продолжить..."

# Переводим первую задачу в передний план
fg %1
echo "Переведена задача в передний план: sleep 5"

# После завершения первой задачи, показываем оставшиеся задачи
jobs

# Переводим вторую задачу в фоновый режим
bg %2
echo "Переведена задача в фоновый режим: sleep 10"

# Ожидаем завершения всех задач
wait
echo "Все задачи завершены."